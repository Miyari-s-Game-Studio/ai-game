
{
  "version": 1,
  "id": "eco_crisis_zh",
  "title": "环境危机",
  "language": "zh",
  "theme": "theme-default",
  "description": "一个互动叙事游戏，玩家扮演一名环保官员，负责解决一起神秘的河流污染事件。",
  "actions": {
    "observe": { "icon": "Eye", "label": "观察" },
    "investigate": { "icon": "Search", "label": "调查" },
    "sample": { "icon": "FlaskConical", "label": "取样" },
    "talk": { "icon": "MessageSquare", "label": "交谈" },
    "announce": { "icon": "Megaphone", "label": "公布" },
    "declare": { "icon": "Flag", "label": "宣布策略" },
    "negotiate": { "icon": "Handshake", "label": "谈判" },
    "build": { "icon": "Building", "label": "建造" },
    "clean": { "icon": "Wrench", "label": "清理" },
    "reflect": { "icon": "Archive", "label": "反思" },
    "celebrate": { "icon": "PartyPopper", "label": "庆祝" }
  },
  "ui": {
    "counterIcons": {
      "clues": "FileText",
      "samples": "Beaker",
      "testimony": "Quote",
      "shutdown_ok": "CheckCircle2",
      "default": "Star"
    },
    "trackStyles": {
      "eco.pollution": {
        "icon": "AlertTriangle",
        "color": "text-rose-500",
        "progressColor": "[&>div]:bg-rose-500"
      },
      "eco.governance": {
        "icon": "Shield",
        "color": "text-emerald-500",
        "progressColor": "[&>div]:bg-emerald-500"
      },
      "eco.media": {
        "icon": "Megaphone",
        "color": "text-sky-500",
        "progressColor": "[&>div]:bg-sky-500"
      }
    }
  },
  "initial": {
    "situation": "investigate_area",
    "counters": {
      "clues": 0,
      "samples": 0,
      "testimony": false,
      "shutdown_ok": false
    }
  },
  "tracks": {
    "eco.pollution": {
      "name": "污染指数",
      "value": 2,
      "max": 10
    },
    "eco.governance": {
      "name": "治理水平",
      "value": 0,
      "max": 8
    },
    "eco.media": {
      "name": "媒体关注度",
      "value": 3,
      "max": 10
    }
  },
  "situations": {
    "investigate_area": {
      "label": "现场调查",
      "on_action": [
        {
          "when": { "actionId": "observe" },
          "do": [
            { "add": "counters.clues,1", "cap": 2 },
            { "log": "你记录了水的颜色、气味和流速，形成了一份基本的勘查记录。" }
          ]
        },
        {
          "when": { "actionId": "investigate", "targetPattern": "排污口|油污|死鱼" },
          "do": [
            { "add": "counters.clues,1" },
            { "log": "你锁定了污染的关键迹象，现在可以着手处理排污口了。" }
          ]
        },
        {
          "when": { "actionId": "investigate", "targetPattern": "上游工厂" },
          "do": [
            { "add": "counters.clues,1" },
            { "set": "next_situation,interview_industry", "if": "counters.clues >= 2" },
            { "log": "工厂现在是重点调查对象。你应该去那里收集更直接的证据。" }
          ]
        },
        {
          "when": { "actionId": "sample" },
          "do": [
            { "add": "counters.samples,1" },
            { "track": "eco.pollution,1" },
            { "set": "next_situation,technical_ops", "if": "counters.samples >= 2" },
            { "log": "取样搅动了沉积物，导致短期内污染升高；这些数据将为后续治理提供支持。" }
          ]
        },
        {
          "when": { "actionId": "talk", "targetPattern": "渔夫|居民|保安" },
          "do": [
            { "secret": "工厂在夜间有可疑的排放。" },
            { "set": "counters.testimony,true" }
          ]
        },
        {
          "when": { "actionId": "announce" },
          "do": [
            { "track": "eco.media,-1" },
            { "log": "舆论暂时降温。" },
            { "track": "eco.media,2", "if": "tracks['eco.pollution'].value >= 7" },
            { "log": "有外国媒体质疑数据的真实性，舆论反弹。", "if": "tracks['eco.pollution'].value >= 7" }
          ]
        },
        {
          "when": { "actionId": "declare", "textRegex": "(工程)" },
          "do": [
            { "set": "route,policy.engineering" },
            { "log": "[路线] 工程优先：优先进行建设和技术治理。" }
          ]
        },
        {
          "when": { "actionId": "declare", "textRegex": "(执法)" },
          "do": [
            { "set": "route,policy.enforcement" },
            { "log": "[路线] 强制执法：优先进行取证/关停。" }
          ]
        },
        {
          "when": { "actionId": "declare", "textRegex": "(公关)" },
          "do": [
            { "set": "route,policy.pr" },
            { "log": "[路线] 公关掩盖：优先稳定舆论。" }
          ]
        }
      ]
    },
    "interview_industry": {
      "label": "约谈工厂",
      "on_action": [
        {
          "when": {
            "actionId": "talk",
            "targetPattern": "经理|保安|工头",
            "require": "counters.testimony == true"
          },
          "do": [
            { "agreement": "工厂将停产整改。" },
            { "set": "counters.shutdown_ok,true" },
            { "track": "eco.pollution,-2" },
            { "track": "eco.governance,1" }
          ]
        },
        {
          "when": { "actionId": "investigate" },
          "do": [
            { "set": "next_situation,technical_ops", "if": "counters.samples >= 2 && counters.shutdown_ok == false" },
            { "log": "进一步调查没有发现新线索。" }
          ]
        },
        {
            "when": { "actionId": "sample" },
            "do": [{ "log": "这里不再需要取样。" }]
        },
        {
            "when": { "actionId": "announce" },
            "do": [{ "log": "应在主要现场发布公告。" }]
        }
      ]
    },
    "technical_ops": {
      "label": "技术治理",
      "on_action": [
        {
          "when": { "actionId": "build" },
          "do": [
            { "track": "eco.governance,2" },
            { "track": "eco.media,1" },
            { "log": "项目进展显著，但施工吸引了注意力。" },
            { "set": "next_situation,wrap_up", "if": "tracks['eco.governance'].value >= 8 && tracks['eco.pollution'].value <= 3 && tracks['eco.media'].value <= 5" }
          ]
        },
        {
          "when": { "actionId": "clean" },
          "do": [
            { "track": "eco.pollution,-1" },
            { "track": "eco.governance,1" },
            { "log": "净化作业降低了污染，稳步推进了治理。" }
          ]
        },
        {
            "when": { "actionId": "announce" },
            "do": [{ "log": "现在的重点是行动，不是言语。" }]
        },
        {
            "when": { "actionId": "investigate" },
            "do": [{ "log": "调查阶段已经结束。" }]
        }
      ]
    },
    "wrap_up": {
      "label": "收尾",
      "on_action": [
        {
          "when": { "actionId": "reflect" },
          "do": [{ "log": "你整理了完整的证据链和治理数据，进入了长期监测期。" }]
        },
        {
          "when": { "actionId": "celebrate" },
          "do": [{ "log": "危机已经解决。你和团队庆祝，并回访了当地居民，他们对环境改善表示感谢。" }]
        }
      ]
    }
  }
}
